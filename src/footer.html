
</main>
    <script>
        function toggleMenu() {
            const menu = document.getElementById("menu");
            menu.classList.toggle("open");
        }

  document.addEventListener("DOMContentLoaded", function () {
    const checkbox = document.querySelector("#darkmode");

    // Restore state
    const saved = localStorage.getItem("darkmode");
    if (saved !== null) {
      checkbox.checked = saved === "true";
    }

    // Save on change
    checkbox.addEventListener("change", function () {
      localStorage.setItem("darkmode", checkbox.checked);
    });
  });
</script>


<script>
(function () {
  // Only run the JS toggle on touch-centric devices; desktop hover stays pure CSS.
  const isTouch = window.matchMedia('(hover: none), (pointer: coarse)').matches;

  function bindWrapper(wrapper) {
    const toggle  = wrapper.querySelector('.zoom-toggle');
    const target  = wrapper.querySelector('.zoom-target');   // contains the <img>
    const close   = wrapper.querySelector('.zoom-close');
    const dismiss = wrapper.querySelector('.zoom-dismiss');

    if (!toggle || !target || !close || !dismiss) return;

    let suppressClickUntil = 0;

    function now() { return performance.now(); }

    function onTouchEndToggle(e, force) {
      // Prevent iOS default behaviors & the subsequent synthetic click
      e.preventDefault();
      e.stopPropagation();
      suppressClickUntil = now() + 350;

      if (typeof force === 'boolean') {
        toggle.checked = force;
      } else {
        toggle.checked = !toggle.checked;
      }
    }

    function onClickToggle(e, force) {
      // Ignore the synthetic click that follows touchend
      if (now() < suppressClickUntil) {
        e.preventDefault();
        e.stopPropagation();
        return;
      }
      e.preventDefault();
      e.stopPropagation();
      if (typeof force === 'boolean') {
        toggle.checked = force;
      } else {
        toggle.checked = !toggle.checked;
      }
    }

    // --- TARGET (image tap) ---
    if (isTouch) {
      target.addEventListener('touchend', (e) => onTouchEndToggle(e), { passive: false });
    }
    target.addEventListener('click', (e) => onClickToggle(e), { passive: false });

    // --- CLOSE (Ã—) ---
    if (isTouch) {
      close.addEventListener('touchend', (e) => onTouchEndToggle(e, false), { passive: false });
    }
    close.addEventListener('click', (e) => onClickToggle(e, false), { passive: false });

    // --- DISMISS (transparent fullscreen) ---
    if (isTouch) {
      dismiss.addEventListener('touchend', (e) => onTouchEndToggle(e, false), { passive: false });
    }
    dismiss.addEventListener('click', (e) => onClickToggle(e, false), { passive: false });
  }

  // Bind all existing wrappers
  document.querySelectorAll('.zoom-wrapper').forEach(bindWrapper);

  // Optional: ESC closes any open zoom (works on desktop too)
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      document.querySelectorAll('.zoom-toggle:checked').forEach(cb => (cb.checked = false));
    }
  });
})();
</script>




</body>
</html>
